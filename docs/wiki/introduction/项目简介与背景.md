# 项目简介与背景

# 项目简介与背景

## 1. 项目目标与用途

`Streamax.Protocol` 项目是一个基于 **JT808 协议** 的扩展库，专门为 **锐明（Streamax）** 公司的公交业务定制。其核心目标是提供一套完整的解决方案，用于解析和生成锐明设备在公交运营中使用的扩展 JT808 协议消息。

该项目的主要用途包括：

*   **协议解析与封装**：将锐明设备上报的二进制数据解析成可读的结构化对象，并能将结构化对象封装成二进制数据发送给锐明设备。
*   **业务数据处理**：支持运营登记、到离站信息上报、违规信息上报、考勤等公交业务相关的数据交互。
*   **设备指令控制**：能够发送发车通知、业务变更指令、升级通知等控制指令给锐明设备。

## 2. 适用场景与受众

### 2.1 适用场景

`Streamax.Protocol` 主要适用于以下场景：

*   **公交智能调度系统**：与锐明车载终端进行数据交互，实现车辆定位、运营状态监控、线路管理、考勤管理等功能。
*   **交通行业监管平台**：接收并处理来自锐明设备的各类运营数据，用于交通管理、数据分析和决策支持。
*   **第三方集成开发**：为需要与锐明车载设备进行数据通信的第三方系统提供便捷的协议支持。

### 2.2 受众

本项目的目标受众包括：

*   **后端开发工程师**：负责开发与锐明设备通信的服务器端应用程序。
*   **系统架构师**：设计基于 JT808 协议的物联网解决方案。
*   **技术支持人员**：需要理解和排查与锐明设备通信相关的问题。
*   **对交通物联网协议感兴趣的初学者**：通过本项目了解 JT808 协议及其在实际应用中的扩展。

## 3. 行业背景：JT808 协议与 Streamax 扩展

### 3.1 JT808 协议简介

**JT808 协议** 是中国交通运输部制定的一项行业标准，全称为《道路运输车辆卫星定位系统车载终端通讯协议》。它定义了道路运输车辆车载终端与监控平台之间的数据通信规范，包括消息格式、命令字、数据类型等。JT808 协议旨在实现对道路运输车辆的实时监控、调度管理和安全保障。

JT808 协议广泛应用于：

*   **公共交通**：公交车、出租车等。
*   **货运物流**：卡车、货运车辆等。
*   **危化品运输**：危险化学品运输车辆等。

### 3.2 Streamax 扩展的行业背景

尽管 JT808 协议提供了基础的通信框架，但在实际应用中，不同的设备制造商和业务需求会在此基础上进行定制和扩展。**锐明（Streamax）** 作为车载监控领域的知名企业，其设备在公交行业有广泛应用。为了满足公交运营的特定需求，锐明在标准 JT808 协议的基础上，增加了许多私有扩展消息。

这些扩展消息涵盖了公交运营中的特有业务，例如：

*   **运营登记**：记录车辆的运营班次、线路等信息。
*   **到离站信息上报**：精确记录车辆在站点间的运行情况。
*   **违规信息上报**：上报超速、疲劳驾驶等违规行为。
*   **考勤管理**：记录驾驶员的考勤数据。
*   **设备故障与升级**：上报设备故障信息或进行远程升级。

`Streamax.Protocol` 项目正是为了处理这些锐明特有的 JT808 扩展消息而开发的，它将这些私有协议进行了标准化和封装，使得开发者能够更方便地与锐明设备进行数据交互，从而构建更完善的公交智能调度和管理系统。

## 4. 项目概述

`Streamax.Protocol` 项目通过提供一系列消息体定义和辅助类，简化了与锐明设备进行 JT808 扩展协议通信的复杂性。它作为一个 NuGet 包发布，方便开发者集成到自己的 .NET 项目中。

### 4.1 主要功能

*   **消息体定义**：为锐明扩展的 JT808 消息（如 0x0B01 运营登记、0x0B02 到离站信息上报等）提供了 C# 消息体类[^1]。
*   **协议解析与构建**：支持将接收到的二进制数据解析为对应的消息体对象，并将消息体对象构建为可发送的二进制数据。
*   **依赖注入支持**：通过 `AddStreamaxConfigure()` 方法[^2] 提供便捷的依赖注入配置，简化项目集成。

### 4.2 消息对照表

项目支持的锐明 JT808 公交业务扩展协议消息列表如下[^3]：

| 序号 | 消息ID | 完成情况 | 测试情况 | 消息体名称 |
| :---: | :---: | :---: | :---: | :---: |
| 1 | 0x0B01 | √ | √ | 运营登记 |
| 2 | 0x0B02 | √ | √ | 到离站信息上报 |
| 3 | 0x0B03 | √ | √ | 进出定点信息上报 |
| 4 | 0x0B04 | √ | √ | 违规信息上报 |
| 5 | 0x0B05 | √ | √ | 考勤 |
| 6 | 0x0B06 | √ | - | 校时请求 |
| 7 | 0x0B07 | √ | - | 行车计划请求 |
| 8 | 0x0B08 | √ | - | 业务登记 |
| 9 | 0x0B09 | √ | √ | 业务请求 |
| 10 | 0x0B0A | √ | - | 升级结果上报 |
| 11 | 0x0B0B | √ | √ | 设备故障上报 |
| 12 | 0x0200_0x14 | √ | - | 视频相关报警 |
| 13 | 0x0200_0x15 | √ | - | 异常驾驶行为报警详细描述 |
| 14 | 0x0200_0x16 | √ | √ | 线路编码 |
| 15 | 0x0200_0x17 | √ | √ | 业务类型 |
| 16 | 0x8B01 | √ | √ | 发车通知 |
| 17 | 0x8B02 | √ | √ | 业务变更指令 |
| 18 | 0x8B05 | √ | √ | 考勤应答 |
| 19 | 0x8B06 | √ | - | 校时应答 |
| 20 | 0x8B09 | √ | √ | 业务请求应答 |
| 21 | 0x8B0A | √ | √ | 升级通知 |

通过对这些消息的解析和封装，`Streamax.Protocol` 项目为开发者提供了与锐明车载终端进行高效、准确通信的能力。

## 参考文献

[^1]: [JT808.Protocol.Extensions.Streamax/MessageBody/](https://github.com/lishewen/Streamax.Protocol/tree/master/JT808.Protocol.Extensions.Streamax/MessageBody)
[^2]: [StreamaxDependencyInjectionExtensions.cs](https://github.com/lishewen/Streamax.Protocol/blob/master/JT808.Protocol.Extensions.Streamax/StreamaxDependencyInjectionExtensions.cs#L4-L6)
[^3]: [README.md](https://github.com/lishewen/Streamax.Protocol/blob/master/README.md#锐明jt808公交业务扩展协议消息对照表)
